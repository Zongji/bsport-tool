<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!--<link type="text/css" href="/css/main.css" rel="stylesheet" />-->

    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!--<script type="text/javascript" src="//apps.bdimg.com/libs/jquery/1.11.3/jquery.min.js"></script>-->

</head>
<body class="main">


<el-row id="app">
    <el-col :span="24">
        <div class="grid-content bg-purple">
            <!--{{ message }}-->
            <!--<button v-on:click="reverseMessage">反转消息11111</button>-->
            <el-date-picker
                    v-model="dateStr"
                    type="date"
                    placeholder="选择日期">
            </el-date-picker>

            <!--<input type="date" v-model="dateStr">-->
            <el-button @click="getDate">爬取网球比赛信息</el-button>
        </div>
    </el-col>
</el-row>
<el-row>
    <el-col :span="24">
        <div class="grid-content bg-purple-light">
            文件列表：
            <ol>
                <li v-for="file in fileList">
                    <a :href="'excel/download/'+ file">{{ file }}</a>
                </li>
            </ol>

            <!--<ol>
                <li v-for="todo in todos">
                    {{ todo.text }}
                </li>
            </ol>-->
        </div>
    </el-col>

</el-row>

</body>



<script>
    Vue.prototype.$http = axios
    var app = new Vue({
        el: '#app',
        data: {
            dateStr: '',
            message: 'Hello Vue!',
            resMsg: '',
            log: '',
            fileList: [],
            todos: [
                { text: '学习 JavaScript' },
                { text: '学习 Vue' },
                { text: '整个牛项目' }
            ],
            timmer: '',

        },
        created: function () {
            // `this` 指向 vm 实例
            // this.timer = setInterval(this.listDir, 2000);
            this.listDir();
        },
        beforeDestroy: function () {
            // clearInterval(this.timer);
        },

        methods: {
            reverseMessage: function () {
                this.message = this.message.split('').reverse().join('')
            },
            test:function(){
                console.info(this.dateStr);
            },
            getDate: function () {
                console.info(this.dateStr);
                this.$http.get('/rest/history/' + this.dateStr).then(function (response) {
                    console.info(response.data);
                    this.resMsg = response.data;
                });
            },
            listDir: function () {
                this.fileList = [];
                files = this.fileList;
                console.info('list dir' + files);
                this.$http.get('/rest/list-dir').then(function (response) {
                    console.info(response.data.data);
                    var data = response.data.data;
                    for (var i =0;i< data.length; i++ ) {
                        files.push(data[i]);
                    }
                });
            },

        }
    })


</script>
</html>